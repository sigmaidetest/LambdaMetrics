{"EDITOR_STATE":{"allProjectFiles":{"1dd6f83f-afee-4d46-a7d1-dd5991d45a29":{"id":"1dd6f83f-afee-4d46-a7d1-dd5991d45a29","parent":null,"name":"LambdaMetrics","type":"DIRECTORY","isDirectory":true,"children":["741e9b11-e4a3-4592-8587-8c6bbc8f4bdd","22a2fb65-ea84-4583-87c5-5d1041c9d3b0","583a3a0a-c206-492e-92c1-c82d677eaccb"],"isRemovable":false,"filePath":"LambdaMetrics"},"741e9b11-e4a3-4592-8587-8c6bbc8f4bdd":{"id":"741e9b11-e4a3-4592-8587-8c6bbc8f4bdd","parent":"1dd6f83f-afee-4d46-a7d1-dd5991d45a29","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"LambdaMetrics/lambda.js","code":"let AWS = require('aws-sdk');\nconst sns = new AWS.SNS();\nconst lambda = new AWS.Lambda();\nconst cloudwatch = new AWS.CloudWatch();\n\nexports.handler = function (event, context, callback) {\n\n\n\t// var params = {\n\t// \tFunctionVersion: 'ALL',\n\t// \t// Marker: 'STRING_VALUE',\n\t// \t// MasterRegion: 'STRING_VALUE',\n\t// \tMaxItems: 100\n\t// };\n\t// lambda.listFunctions(params, function (err, data) {\n\t// \tif (err) { \n\t// \t\tconsole.log(err, err.stack);\n\t// \t\tcallback(err);\n\t// \t}\n\t// \telse {\n\t// \t\tconsole.log(data);\n\t// \t\tcallback(null, 'Successfully executed');\n\t// \t}\n\t// });\n\n\tvar params = {\n\t\tEndTime: 1526294898, /* required */\n\t\tMetricName: 'Duration', /* required */\n\t\tNamespace: 'AWS/Lambda', /* required */\n\t\tPeriod: 180, /* required */\n\t\tStartTime: 1526122095, /* required */\n\t\tDimensions: [\n\t\t\t{\n\t\t\t\tName: 'FunctionName', /* required */\n\t\t\t\tValue: 'SigmaTestEnvironmentRunner-andunranmal'\n\t\t\t},\n\t\t\t/* more items */\n\t\t],\n\t\t// ExtendedStatistics: [\n\t\t// \t'STRING_VALUE',\n\t\t// \t/* more items */\n\t\t// ],\n\t\tStatistics: ['Average', 'Minimum', 'Maximum'],\n\t\tUnit: 'Milliseconds'\n\t};\n\tcloudwatch.getMetricStatistics(params, function (err, data) {\n\t\tif (err) console.log(err, err.stack); // an error occurred\n\t\telse console.log(data);           // successful response\n\t});\n\n\t// var params = {\n\t// \tDimensions: [\n\t// \t\t{\n\t// \t\t\tName: 'FunctionName', /* required */\n\t// \t\t\tValue: 'SigmaTestEnvironmentRunner-andunranmal'\n\t// \t\t},\n\t// \t\t/* more items */\n\t// \t],\n\t// \tMetricName: 'Duration',\n\t// \tNamespace: 'AWS/Lambda',\n\t// \t// NextToken: 'STRING_VALUE'\n\t// };\n\t// cloudwatch.listMetrics(params, function (err, data) {\n\t// \tif (err) {\n\t// \t\tconsole.log(err, err.stack);\n\t// \t\tcallback(err);\n\t// \t}\n\t// \telse {\n\t// \t\tlet metrics = data.Metrics;\n\t// \t\tmetrics.forEach(metric => {\n\t// \t\t\tconsole.log(metric['MetricName']);\n\t// \t\t\tconsole.log(metric['Dimensions']);\n\t// \t\t});\n\t// \t\tcallback(null, 'Successfully executed');\n\t// \t}\n\t// });\n\n\n\n}","triggers":[],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"version":205,"syncVersion":157,"references":[],"testCases":{"71413f1a-6891-476e-9897-a2209e22c71b":{"id":"71413f1a-6891-476e-9897-a2209e22c71b","name":"Event 1","functionId":"741e9b11-e4a3-4592-8587-8c6bbc8f4bdd","event":"{\n    \"key1\": \"value1\",\n    \"key2\": \"value2\",\n    \"key3\": \"value3\"\n}"}}},"22a2fb65-ea84-4583-87c5-5d1041c9d3b0":{"id":"22a2fb65-ea84-4583-87c5-5d1041c9d3b0","parent":"1dd6f83f-afee-4d46-a7d1-dd5991d45a29","name":"FunctionListHandler.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"LambdaMetrics/FunctionListHandler.js","code":"let AWS = require('aws-sdk');\nlet commonUtils = require('./CommonUtils');\n\nexports.handler = function(event, context, callback) {\n\n\tvar params = {\n\t\tFunctionVersion: 'ALL',\n\t\t// Marker: 'STRING_VALUE',\n\t\t// MasterRegion: 'STRING_VALUE',\n\t\tMaxItems: 100\n\t};\n\tlambda.listFunctions(params, function (err, data) {\n\t\tif (err) { \n\t\t\tconsole.log(err, err.stack);\n\t\t\tcallback(null, commonUtils.generateFailureResponse(err));\n\t\t}\n\t\telse {\n\t\t\tconsole.log(data);\n\t\t\tcallback(null, commonUtils.generateSuccessResponse(data));\n\t\t}\n\t});\n}","triggers":[{"resourceName":"apigusEast1LambdaMetricsAPIfunctionsget","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"version":101,"syncVersion":35,"references":["583a3a0a-c206-492e-92c1-c82d677eaccb"]},"583a3a0a-c206-492e-92c1-c82d677eaccb":{"id":"583a3a0a-c206-492e-92c1-c82d677eaccb","parent":"1dd6f83f-afee-4d46-a7d1-dd5991d45a29","name":"CommonUtils.js","type":"JS_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"LambdaMetrics/CommonUtils.js","code":"function generateResponse(payload, statusCode = 200, headers = {}) {\n    return {\n        \"isBase64Encoded\": 1,\n        \"statusCode\": statusCode,\n        \"headers\": headers,\n        \"body\": JSON.stringify(payload)\n    };\n}\n\nfunction generateSuccessResponse(payload) {\n    return generateResponse(payload, 200, {'access-control-allow-origin': '*'});\n}\n\nfunction generateFailureResponse(payload) {\n    return generateResponse(payload, 500, {'access-control-allow-origin': '*'});\n}","triggers":[],"version":211,"syncVersion":74,"references":[]}},"rootNode":"1dd6f83f-afee-4d46-a7d1-dd5991d45a29","openFiles":["741e9b11-e4a3-4592-8587-8c6bbc8f4bdd","22a2fb65-ea84-4583-87c5-5d1041c9d3b0","583a3a0a-c206-492e-92c1-c82d677eaccb"],"currentFileId":"22a2fb65-ea84-4583-87c5-5d1041c9d3b0","resources":{"snsusEast1BatchProcessSNS":{"name":"snsusEast1BatchProcessSNS","type":"SNS","config":{"topicMode":1,"topicName":"BatchProcess_SNS","topicArn":"arn:aws:sns:us-east-1:318300609668:BatchProcess_SNS","topicRegion":"us-east-1","snsType":0,"subscriptions":[]},"globallyEditable":true},"apigusEast1LambdaMetricsAPIfunctionsget":{"name":"apigusEast1LambdaMetricsAPIfunctionsget","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"LambdaMetricsAPI","endpointType":"EDGE","resourceMode":0,"resourceName":"functions","resourcePath":"/functions","restMethod":"GET","proxyIntegration":true,"enableCORS":false,"stageMode":0,"stageName":"test"},"globallyEditable":true}},"envVariables":[{"lambdaId":"all","varKey":"SIGMA_AWS_ACC_ID","varValue":null,"shouldPersist":false,"editable":false}],"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true}}},"lambdaId":"741e9b11-e4a3-4592-8587-8c6bbc8f4bdd","additionalFiles":[]},"PROJECT_META":{"projectName":"LambdaMetrics","projectDescription":"","projectVersion":"1.0.0","projectRegion":"us-east-1","repoName":"LambdaMetrics","repoUrl":"https://github.com/sigmaidetest/LambdaMetrics","lastSave":1526296034961}}